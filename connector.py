from requests import Session


def setup_connector(application, name='default', **options):
    if not hasattr(application, 'extensions'):
        application.extensions = {}

    if 'connectors' not in application.extensions:
        application.extensions['connectors'] = {}
    session = Session()

    headers = options.get('headers', {})
    headers['Content-Type'] = 'application/json'

    session.headers.update(headers)
    application.extensions['connectors'][name] = session
    return session


def get_connector(application, name='default'):
    return application.extensions['connectors'][name]
